(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13364620"],{"543d":function(e,t,r){"use strict";r("54b2")},"54b2":function(e,t,r){},"78d1":function(e,t,r){"use strict";r("de6f")},"80c1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("common-layout",[r("div",{staticClass:"top"},[r("div",{staticClass:"header"},[r("span",{staticClass:"title"},[e._v("线上医疗系统")])])]),r("div",{staticClass:"login"},[r("a-form",{attrs:{form:e.form}},[r("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",tabBarStyle:{textAlign:"center"}}},[r("a-tab-pane",{key:"1",attrs:{tab:"账户密码登录"}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),r("form-row",{staticStyle:{"padding-bottom":"11px"},attrs:{label:"医院"}},[r("a-form-item",{staticStyle:{left:"0px",width:"100%"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role_l",{rules:[{required:!0,message:"请选择角色!"}]}],expression:"[\n                    'role_l',\n                    { rules: [{ required: true, message: '请选择角色!' }] },\n                    ]"}],attrs:{placeholder:"选择用户角色"},on:{change:e.handleMenuClickLogin}},[r("a-select-option",{attrs:{value:"普通用户"}},[e._v(" 普通用户 ")]),r("a-select-option",{attrs:{value:"医生"}},[e._v(" 医生 ")])],1)],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone_l",{rules:[{required:!0,message:"请输入手机号！",whitespace:!0}]}],expression:"['phone_l', {rules: [{ required: true, message: '请输入手机号！', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入手机号"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password_l",{rules:[{required:!0,message:"请输入密码！",whitespace:!0}]}],expression:"['password_l', {rules: [{ required: true, message: '请输入密码！', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("div",[r("a-checkbox",{attrs:{checked:!0}},[e._v("自动登录")]),r("a",{staticStyle:{float:"right"}},[e._v("忘记密码")])],1),r("a-form-item",[r("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1)],1),r("a-tab-pane",{key:"2",attrs:{tab:"注册账户"}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),r("form-row",{staticStyle:{"padding-bottom":"11px"},attrs:{label:"医院"}},[r("a-form-item",{staticStyle:{left:"0px",width:"100%"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role_r",{rules:[{required:!0,message:"请选择角色!"}]}],expression:"[\n                    'role_r',\n                    { rules: [{ required: true, message: '请选择角色!' }] },\n                    ]"}],attrs:{placeholder:"选择用户角色"},on:{change:e.handleMenuClickRegister}},[r("a-select-option",{attrs:{value:"普通用户"}},[e._v(" 普通用户 ")]),r("a-select-option",{attrs:{value:"医生"}},[e._v(" 医生 ")])],1)],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone_r",{rules:[{required:!0,message:"请输入手机号！",whitespace:!0}]}],expression:"['phone_r', {rules: [{ required: true, message: '请输入手机号！', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入手机号"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password_r",{rules:[{required:!0,message:"请输入密码！",whitespace:!0}]}],expression:"['password_r', {rules: [{ required: true, message: '请输入密码！', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"},on:{click:e.handleRegister}},[e._v("注册")])],1)],1)],1)],1)],1)])},o=[],s=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"common-layout"},[r("div",{staticClass:"content"},[e._t("default")],2)])},l=[],n=r("5880"),c={name:"CommonLayout",computed:Object(s["a"])({},Object(n["mapState"])("setting",["footerLinks","copyright"]))},u=c,p=(r("78d1"),r("2877")),d=Object(p["a"])(u,i,l,!1,null,"c154a3dc",null),m=d.exports,h=r("93d6"),g=r("b775"),f=r("89a5"),v=[{router:"root",children:[{router:"info",children:["userInfo","healthInfo"]},{router:"medicalCheck"},{router:"doctorManage"},{router:"talkSystem"}]}],w=[{router:"root",children:[{router:"upload"},{router:"presCheck"},{router:"talkSystem"}]}],_={name:"Login",components:{CommonLayout:m},data:function(){return{logging:!1,error:"",phone:null,role:-1,form:this.$form.createForm(this)}},computed:{systemName:function(){return this.$store.state.setting.systemName}},methods:Object(s["a"])(Object(s["a"])({},Object(n["mapMutations"])("account",["setUser","setPermissions","setRoles","setID"])),{},{handleMenuClickRegister:function(e){this.form.setFieldsValue({role_r:e})},handleRegister:function(e){var t=this;e.preventDefault(),this.form.validateFields(["role_r","phone_r","password_r"],(function(e){if(!e){var r=t.form.getFieldValue("phone_r"),a=t.form.getFieldValue("password_r"),o=t.form.getFieldValue("role_r");o="普通用户"==o?"2":"医生"==o?"3":"1",Object(h["t"])(r,a,"user"+r,o).then(t.afterRegister)}}))},afterRegister:function(e){console.log(e)},handleMenuClickLogin:function(e){this.form.setFieldsValue({role_l:e})},handleLogin:function(e){var t=this;e.preventDefault(),this.form.validateFields(["role_l","phone_l","password_l"],(function(e){if(!e){t.logging=!0,t.phone=t.form.getFieldValue("phone_l");var r=t.form.getFieldValue("role_l");t.role="普通用户"==r?"2":"医生"==r?"3":"1";var a=t.form.getFieldValue("password_l");Object(h["r"])(t.phone,a).then(t.afterLogin)}}))},afterLogin:function(e){var t=this,r=e.data;this.logging=!1,200==r.retCode?(this.setUser(this.phone),this.setRoles(this.role),Object(g["g"])({token:r.result.token,expireAt:new Date(r.result.expire)}),"2"==this.role?Object(h["q"])(this.phone).then((function(e){t.setID(e.data.result.id)})):"3"==this.role&&Object(h["k"])(this.phone).then((function(e){t.setID(e.data.result.id)})),"2"===this.role?(Object(f["d"])(v),this.$router.push("/info/userinfo")):"3"===this.role&&(Object(f["d"])(w),this.$router.push("/upload")),this.$message.success(r.msg,3)):this.error=r.msg,console.log(1)}})},b=_,y=(r("543d"),Object(p["a"])(b,a,o,!1,null,"7c9686d0",null)),x=y.exports;t["default"]=x},de6f:function(e,t,r){}}]);