(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ce4f3d3"],{"0ec5":function(e,t,r){},"2e2e":function(e,t,r){"use strict";r("0ec5")},"6e57":function(e,t,r){"use strict";r("e413")},"80c1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("common-layout",[a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("img",{staticClass:"logo",attrs:{alt:"logo",src:r("4ffd")}}),a("span",{staticClass:"title"},[e._v(e._s(e.systemName))])]),a("div",{staticClass:"desc"},[e._v("Ant Design 是西湖区最具影响力的 Web 设计规范")])]),a("div",{staticClass:"login"},[a("a-form",{attrs:{form:e.form}},[a("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",tabBarStyle:{textAlign:"center"}}},[a("a-tab-pane",{key:"1",attrs:{tab:"账户密码登录"}},[a("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),a("form-row",{staticStyle:{"padding-bottom":"11px"},attrs:{label:"医院"}},[a("a-form-item",{staticStyle:{left:"0px",width:"100%"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role_l",{rules:[{required:!0,message:"请选择角色!"}]}],expression:"[\n                    'role_l',\n                    { rules: [{ required: true, message: '请选择角色!' }] },\n                    ]"}],attrs:{placeholder:"选择用户角色"},on:{change:e.handleMenuClickLogin}},[a("a-select-option",{attrs:{value:"普通用户"}},[e._v(" 普通用户 ")]),a("a-select-option",{attrs:{value:"医生"}},[e._v(" 医生 ")]),a("a-select-option",{attrs:{value:"管理员"}},[e._v(" 管理员 ")])],1)],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone_l",{rules:[{required:!0,message:"请输入手机号！",whitespace:!0}]}],expression:"['phone_l', {rules: [{ required: true, message: '请输入手机号！', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入手机号"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password_l",{rules:[{required:!0,message:"请输入密码！",whitespace:!0}]}],expression:"['password_l', {rules: [{ required: true, message: '请输入密码！', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("div",[a("a-checkbox",{attrs:{checked:!0}},[e._v("自动登录")]),a("a",{staticStyle:{float:"right"}},[e._v("忘记密码")])],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:"注册账户"}},[a("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),a("form-row",{staticStyle:{"padding-bottom":"11px"},attrs:{label:"医院"}},[a("a-form-item",{staticStyle:{left:"0px",width:"100%"}},[a("a-form-item",{staticStyle:{left:"0px",width:"100%"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role_r",{rules:[{required:!0,message:"请选择角色!"}]}],expression:"[\n                    'role_r',\n                    { rules: [{ required: true, message: '请选择角色!' }] },\n                    ]"}],attrs:{placeholder:"选择用户角色"},on:{change:e.handleMenuClickRegister}},[a("a-select-option",{attrs:{value:"普通用户"}},[e._v(" 普通用户 ")]),a("a-select-option",{attrs:{value:"医生"}},[e._v(" 医生 ")]),a("a-select-option",{attrs:{value:"管理员"}},[e._v(" 管理员 ")])],1)],1)],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone_r",{rules:[{required:!0,message:"请输入手机号！",whitespace:!0}]}],expression:"['phone_r', {rules: [{ required: true, message: '请输入手机号！', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入手机号"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password_r",{rules:[{required:!0,message:"请输入密码！",whitespace:!0}]}],expression:"['password_r', {rules: [{ required: true, message: '请输入密码！', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"},on:{click:e.handleRegister}},[e._v("注册")])],1)],1)],1)],1)],1)])},o=[],s=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"common-layout"},[r("div",{staticClass:"content"},[e._t("default")],2),r("page-footer",{attrs:{"link-list":e.footerLinks,copyright:e.copyright}})],1)},l=[],n=r("613e"),c=r("5880"),u={name:"CommonLayout",components:{PageFooter:n["a"]},computed:Object(s["a"])({},Object(c["mapState"])("setting",["footerLinks","copyright"]))},p=u,d=(r("6e57"),r("2877")),m=Object(d["a"])(p,i,l,!1,null,"63c094a6",null),h=m.exports,g=r("93d6"),f=r("b775"),v=r("89a5"),w=[{router:"root",children:[{router:"dashboard",children:["workplace","analysis"]},{router:"info",children:["userInfo","healthInfo"]},{router:"doctorManage"},{router:"talkSystem"}]}],_=[{router:"root",children:[{router:"dashboard",children:["workplace"]},{router:"userCheck"},{router:"presCheck"},{router:"upload"},{router:"talkSystem"}]}],b={name:"Login",components:{CommonLayout:h},data:function(){return{logging:!1,error:"",phone:null,role:-1,form:this.$form.createForm(this)}},computed:{systemName:function(){return this.$store.state.setting.systemName}},methods:Object(s["a"])(Object(s["a"])({},Object(c["mapMutations"])("account",["setUser","setPermissions","setRoles","setID"])),{},{handleMenuClickRegister:function(e){this.form.setFieldsValue({role_r:e})},handleRegister:function(e){var t=this;e.preventDefault(),this.form.validateFields(["role_r","phone_r","password_r"],(function(e){if(!e){var r=t.form.getFieldValue("phone_r"),a=t.form.getFieldValue("password_r"),o=t.form.getFieldValue("role_r");o="普通用户"==o?"2":"医生"==o?"3":"1",Object(g["k"])(r,a,"user"+r,o).then(t.afterRegister)}}))},afterRegister:function(e){console.log(e)},handleMenuClickLogin:function(e){this.form.setFieldsValue({role_l:e})},handleLogin:function(e){var t=this;e.preventDefault(),this.form.validateFields(["role_l","phone_l","password_l"],(function(e){if(!e){t.logging=!0,t.phone=t.form.getFieldValue("phone_l");var r=t.form.getFieldValue("role_l");t.role="普通用户"==r?"2":"医生"==r?"3":"1";var a=t.form.getFieldValue("password_l");Object(g["i"])(t.phone,a).then(t.afterLogin)}}))},afterLogin:function(e){var t=this,r=e.data;this.logging=!1,200==r.retCode?(this.setUser(this.phone),this.setRoles(this.role),Object(f["g"])({token:r.result.token,expireAt:new Date(r.result.expire)}),"2"==this.role?Object(g["h"])(this.phone).then((function(e){t.setID(e.data.result.id)})):"3"==this.role&&Object(g["f"])(this.phone).then((function(e){t.setID(e.data.result.id)})),"2"===this.role?Object(v["d"])(w):"3"===this.role&&Object(v["d"])(_),this.$router.push("/dashboard/workplace"),this.$message.success(r.msg,3)):this.error=r.msg,console.log(1)}})},y=b,x=(r("2e2e"),Object(d["a"])(y,a,o,!1,null,"0c91b35c",null)),k=x.exports;t["default"]=k},e413:function(e,t,r){}}]);